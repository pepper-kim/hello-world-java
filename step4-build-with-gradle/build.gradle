plugins {
    id 'java'
    id 'application'
}

// í”„ë¡œì íŠ¸ ì •ë³´
group = 'com.example'
version = '1.0.0'

// Java ë²„ì „ ì„¤ì •
java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

// ë©”ì¸ í´ë˜ìŠ¤ ì„¤ì • (./gradlew run í•  ë•Œ ì‹¤í–‰ë  í´ë˜ìŠ¤)
application {
    mainClass = 'JsonApp'
}

// ì˜ì¡´ì„±ì„ ë‹¤ìš´ë¡œë“œí•  ì €ì¥ì†Œ ì„¤ì •
repositories {
    mavenCentral()  // Maven Central Repository
}

// ì˜ì¡´ì„± ì •ì˜
dependencies {
    // Jackson JSON ë¼ì´ë¸ŒëŸ¬ë¦¬
    //  - Step 3ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí–ˆë˜ 3ê°œ JARì´ ì—¬ê¸° í•œ ì¤„ë¡œ!
    //  - jackson-databindëŠ” jackson-coreì™€ jackson-annotationsë¥¼ ìë™ìœ¼ë¡œ í¬í•¨
    //  - ì˜ì¡´ì„± ì „ì´(transitive dependencies) ìë™ í•´ê²°!
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.15.2'
}

// ì»´íŒŒì¼ ì„¤ì •
compileJava {
    options.encoding = 'UTF-8'
}

// Gradle Wrapper ì„¤ì •
wrapper {
    gradleVersion = '8.5'
    distributionType = Wrapper.DistributionType.BIN
}

// ì¶”ê°€ íƒœìŠ¤í¬: JAR íŒŒì¼ì— ë©”ì¸ í´ë˜ìŠ¤ ì •ë³´ í¬í•¨
jar {
    manifest {
        attributes(
            'Main-Class': application.mainClass.get()
        )
    }
}

// ì»¤ìŠ¤í…€ íƒœìŠ¤í¬: ì˜ì¡´ì„± ì •ë³´ ì¶œë ¥
tasks.register('showDependencies') {
    doLast {
        println "\n=== í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì •ë³´ ==="
        configurations.runtimeClasspath.resolvedConfiguration.resolvedArtifacts.each { artifact ->
            println "ğŸ“¦ ${artifact.moduleVersion.id.name}:${artifact.moduleVersion.id.version}"
        }
        println "\nâœ… Step 3ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí–ˆë˜ 3ê°œ JAR íŒŒì¼ì´ ìë™ìœ¼ë¡œ ê´€ë¦¬ë©ë‹ˆë‹¤!"
        println "   - jackson-core, jackson-databind, jackson-annotations"
    }
} 